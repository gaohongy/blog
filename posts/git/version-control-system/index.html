<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Version Control System - </title><meta name=author content="ghy"><meta name=author-link content="https://github.com/gaohongy"><meta name=description content="Data Model The following pseudo code can explain the git data model clearly. Firstly, we will talk about the three models in git. 1 2 3 4 5 6 7 8 9 10 11 12 13 // a file is a set of data type blob = array<byte> // a directory which concludes files and directories type tree = map<string, tree | blob> // every commit concludes a parent, metadata"><meta name=keywords content='Hugo,FixIt'><meta itemprop=name content="Version Control System"><meta itemprop=description content="Data Model The following pseudo code can explain the git data model clearly. Firstly, we will talk about the three models in git. 1 2 3 4 5 6 7 8 9 10 11 12 13 // a file is a set of data type blob = array<byte> // a directory which concludes files and directories type tree = map<string, tree | blob> // every commit concludes a parent, metadata"><meta itemprop=datePublished content="2023-08-13T00:41:49+08:00"><meta itemprop=dateModified content="2024-05-08T11:47:24+08:00"><meta itemprop=wordCount content="3614"><meta itemprop=keywords content="Git"><meta property="og:url" content="https://gaohongy.github.io/blog/posts/git/version-control-system/"><meta property="og:title" content="Version Control System"><meta property="og:description" content="Data Model The following pseudo code can explain the git data model clearly. Firstly, we will talk about the three models in git. 1 2 3 4 5 6 7 8 9 10 11 12 13 // a file is a set of data type blob = array<byte> // a directory which concludes files and directories type tree = map<string, tree | blob> // every commit concludes a parent, metadata"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-13T00:41:49+08:00"><meta property="article:modified_time" content="2024-05-08T11:47:24+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Version Control System"><meta name=twitter:description content="Data Model The following pseudo code can explain the git data model clearly. Firstly, we will talk about the three models in git. 1 2 3 4 5 6 7 8 9 10 11 12 13 // a file is a set of data type blob = array<byte> // a directory which concludes files and directories type tree = map<string, tree | blob> // every commit concludes a parent, metadata"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://gaohongy.github.io/blog/posts/git/version-control-system/><link rel=prev href=https://gaohongy.github.io/blog/posts/linux/comparison-of-shell-script-execution-modes/><link rel=next href=https://gaohongy.github.io/blog/posts/c-c++/c++-asynchronous-and-synchronous-mechanisms/><link rel=stylesheet href=/blog/css/style.min.css><link rel=stylesheet href=/blog/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/blog/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Version Control System","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/gaohongy.github.io\/blog\/posts\/git\/version-control-system\/"},"genre":"posts","wordcount":3614,"url":"https:\/\/gaohongy.github.io\/blog\/posts\/git\/version-control-system\/","datePublished":"2023-08-13T00:41:49+08:00","dateModified":"2024-05-08T11:47:24+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"ghy"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/blog/ title><img loading=lazy src=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202301210616317.png data-title=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202301210616317.png data-alt=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202301210616317.png class=logo style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text></span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/blog/posts/>文章</a></li><li class=menu-item><a class=menu-link href=/blog/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/blog/tags/>标签</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/blog/ title><img loading=lazy src=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202301210616317.png data-title=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202301210616317.png data-alt=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202301210616317.png class=logo style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text></span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/blog/posts/>文章</a></li><li class=menu-item><a class=menu-link href=/blog/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/blog/tags/>标签</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class=breadcrumb-container><ol class=breadcrumb><li class=breadcrumb-item><a href=/blog/ title>主页</a></li><li class=breadcrumb-item><a href=/blog/posts/ title=Posts>Posts</a></li><li class="breadcrumb-item active" aria-current=page>Version Control System</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Version Control System</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/gaohongy title=作者 target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202205161528792.jpg data-title=ghy data-alt=ghy class=avatar style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;ghy</a></span>
<span class=post-category>收录于 <a href=/blog/categories/git/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Git</a></span></div><div class=post-meta-line><span title="发布于 2023-08-13 00:41:49"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2023-08-13>2023-08-13</time></span>&nbsp;<span title="更新于 2024-05-08 11:47:24"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2024-05-08>2024-05-08</time></span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#data-model>Data Model</a></li><li><a href=#staging-area>staging area</a></li><li><a href=#movement>Movement</a><ul><li><a href=#head-movement>HEAD movement</a></li><li><a href=#branchcommit-movement>Branch/Commit movement</a><ul><li><a href=#merge-branches>Merge branches</a></li><li><a href=#revoke-changes>Revoke changes</a></li><li><a href=#move-the-specify-commit>Move the specify commit</a></li></ul></li></ul></li><li><a href=#realistic-scenarios>Realistic scenarios</a></li><li><a href=#tag>Tag</a></li><li><a href=#remote-warehouse>Remote warehouse</a><ul><li><a href=#git-fetch>git fetch</a></li><li><a href=#git-pull>git pull</a></li><li><a href=#git-push>git push</a></li></ul></li><li><a href=#remote-tracking>Remote tracking</a></li><li><a href=#gitignore>.gitignore</a><ul><li><a href=#global-config-of-gitignore>global config of .gitignore</a></li></ul></li><li><a href=#comments>Comments</a><ul><li><a href=#the-commands-which-are-used-in-experiment>The commands which are used in experiment</a></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div></div><div class=content id=content data-end-flag=EOF><h2 id=data-model>Data Model</h2><p>The following pseudo code can explain the git data model clearly.</p><p>Firstly, we will talk about the three models in git.</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>// a file is a set of data
</span></span><span class=line><span class=cl>type blob = array&lt;byte&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// a directory which concludes files and directories
</span></span><span class=line><span class=cl>type tree = map&lt;string, tree | blob&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// every commit concludes a parent, metadata and top tree
</span></span><span class=line><span class=cl>type commit = struct {
</span></span><span class=line><span class=cl>    parent: array&lt;commit&gt;
</span></span><span class=line><span class=cl>    author: string
</span></span><span class=line><span class=cl>    message: string
</span></span><span class=line><span class=cl>    snapshot: tree
</span></span><span class=line><span class=cl>}</span></span></code></pre></td></tr></table></div></div><blockquote><p>How should we understand the bolb, tree and commit?</p></blockquote><p>In my opinion, the best way to understand these three data models in git is to follow the <a href=https://git-scm.com/book/en/v2/Git-Internals-Git-Objects target=_blank rel="external nofollow noopener noreferrer">tutorial or experiment of the offical website</a>(<a href=https://git-scm.com/book/zh/v2/Git-%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86-Git-%E5%AF%B9%E8%B1%A1 target=_blank rel="external nofollow noopener noreferrer">中文版</a>).</p><p>I will introduce this tutorial from a macro perspective.</p><p>The experiment process is diveded into three parts.</p><ol><li>Introduces the concept of blob</li></ol><ul><li>Use the command git-hash-object to understand the object id of blob</li><li>Use the process of editing the test.txt to understand the version control preliminarily<ol><li>Create test.txt, then write some content (such as &ldquo;version 1&rdquo;) to it and last create a object id for it</li><li>Edit the content of test.txt (such as the content becomes to &ldquo;version 2&rdquo;) and create a new object id for it</li><li>Delete the original file test.txt, you will find you can use the content id to restore the content of test.txt</li></ol></li></ul><ol start=2><li>Introduce the concept of tree</li></ol><ul><li>Add the test.txt (the content is &ldquo;version 1&rdquo;) to index (staging area)</li><li>Create a object id for current staging area</li><li>Create a new file named new.txt</li><li>Add the test.txt (the content is &ldquo;version 2&rdquo;) and new.txt to index</li><li>Create a object id for current staging area</li><li>Add the first object of staging area to the second object of staging area</li></ul><ol start=3><li>Learn about the concept of commit<ul><li>Commit the first tree</li><li>Commit the second tree and specify the parent commit is the first commit</li><li>Commit the third tree and specify the parent commit is the second commit</li></ul></li></ol><blockquote><p>The commands which are used in experiment are placed in the commends at the end of the text</p></blockquote><p>After the experiment, we will have a deeper understanding of these three data models.
A premise is that git need to complete the requirements of version control.</p><ul><li>At an abstract level, blob、tree and commit are three data models in git.</li><li>At an physical level, Blob、tree and commit are a ordinary binary file that saves the content and other information of file or directory. The uniqueness of them lies in the name, they were named by the hash value of the content and other information, which is calld object id of the file.</li></ul><p>In order to get a depper understanding of these statements, we need to pay attention to the actual physical file of these models.</p><ul><li>When we create a blob for a file, we will find that a new file shows up in the <code>.git/objects</code>. Although we delete the original file, we can use blob to restore it. In other words, the blob save the content of the file.</li><li>Creating a tree concludes two parts, the first one is to put some files or directories into staging area, after this operation, we will find a new file named <code>index</code> shows up in the <code>.git</code>. The second one is to create a tree for staging area, we will find a new file shows up in the <code>.git/objects</code>, its format is same as a blob.</li><li>When we create a commit for a tree (a commit can only be created for a tree), we will find a new file shows up in the <code>.git/objects</code></li></ul><p>Let us comb the logical relationship of blob、tree and commit.
A blob can save the content of file, but it can&rsquo;t save the filename and catalog relationship. So git introdces the tree, it can save the filename and catalog relationship. But tree can&rsquo;t save other information such as commitor and commit time and we can&rsquo;t understand the meaning of hash value (such who did what), so git introduces the commit, bases on the tree and add other useful information.</p><p>Secondly, let us see the concept of object in git.</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>a</span> <span class=n>object</span> <span class=ow>in</span> <span class=n>git</span> <span class=n>may</span> <span class=n>be</span> <span class=n>a</span> <span class=n>blob</span><span class=p>(</span><span class=n>file</span><span class=p>),</span> <span class=n>tree</span><span class=p>(</span><span class=n>directory</span><span class=p>)</span> <span class=ow>or</span> <span class=n>commit</span><span class=p>(</span><span class=ow>or</span> <span class=n>snapshot</span><span class=p>,</span> <span class=n>a</span> <span class=n>state</span> <span class=n>at</span> <span class=n>a</span> <span class=n>certain</span> <span class=n>moment</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>type</span> <span class=n>object</span> <span class=o>=</span> <span class=n>blob</span> <span class=o>|</span> <span class=n>tree</span> <span class=o>|</span> <span class=n>commit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>git</span> <span class=n>maintenances</span> <span class=n>a</span> <span class=n>big</span> <span class=n>dictionary</span><span class=p>,</span> <span class=n>which</span> <span class=n>uses</span> <span class=n>a</span> <span class=n>string</span> <span class=n>as</span> <span class=n>a</span> <span class=n>key</span> <span class=n>to</span> <span class=n>index</span> <span class=n>an</span> <span class=n>object</span>
</span></span><span class=line><span class=cl><span class=n>objects</span> <span class=o>=</span> <span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span> <span class=n>object</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>how</span> <span class=n>does</span> <span class=n>git</span> <span class=n>store</span> <span class=n>an</span> <span class=n>object</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>store</span><span class=p>(</span><span class=n>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>id</span> <span class=o>=</span> <span class=n>sha1</span><span class=p>(</span><span class=n>object</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>objects</span><span class=p>[</span><span class=n>id</span><span class=p>]</span> <span class=o>=</span> <span class=n>object</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>how</span> <span class=n>does</span> <span class=n>git</span> <span class=nb>load</span> <span class=n>an</span> <span class=n>object</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>load</span><span class=p>(</span><span class=n>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>objects</span><span class=p>[</span><span class=n>id</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p>Although commit have some useful information, which can help people understand these commits, but we can only find a commit by its long and meaningless hash value string now. So git introduces the reference, it contains two parts of file. The first one is the <code>.git/HEAD</code> and the second one is the <code>.git/refs/xxx</code>. Simply speaking, reference is just a short and meaningful string and it refer to a commit. People can use this string to find a commit.</p><p>The so-called branch is a synonym for a reference. The difficulty is that top level of operation for branch is different from bottom level of operation. If you don&rsquo;t want to confuse the understand, please remember that a reference is just a pointer, it uses a short string to simplify the long hash value string, although at top level, we always say commit current changes at this branch, a branch (reference) is not a real way.</p><p>If you have feeled puzzle about the relationship between different branches, a good way to comb them is that you can ignore the existed branches, what you are facing is only the current working directory. Actually, when we say that create a new branch and git commit at one branch, it means we create a new reference and a commit, then make the reference point to this commit and keep the original reference unchanged.</p><p>Thirdly, let us see the concept of reference in git.</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>//</span> <span class=n>git</span> <span class=n>uses</span> <span class=n>a</span> <span class=n>long</span> <span class=ow>and</span> <span class=n>meaningless</span> <span class=n>string</span> <span class=n>to</span> <span class=n>index</span> <span class=n>an</span> <span class=n>object</span><span class=p>,</span> <span class=n>which</span> <span class=n>is</span> <span class=n>difficult</span> <span class=k>for</span> <span class=n>human</span> <span class=n>to</span> <span class=n>memorise</span><span class=o>.</span> 
</span></span><span class=line><span class=cl><span class=o>//</span> <span class=n>So</span> <span class=n>it</span> <span class=n>introduces</span> <span class=n>a</span> <span class=n>new</span> <span class=n>concept</span><span class=p>,</span> <span class=n>reference</span><span class=o>.</span> <span class=n>A</span> <span class=n>reference</span> <span class=n>is</span> <span class=n>a</span> <span class=n>simple</span> <span class=ow>and</span> <span class=n>custom</span> <span class=n>string</span><span class=p>,</span> <span class=n>which</span> <span class=n>can</span> <span class=n>substitude</span> <span class=n>the</span> <span class=nb>hash</span> <span class=n>string</span><span class=o>.</span>
</span></span><span class=line><span class=cl><span class=n>references</span> <span class=o>=</span> <span class=n>map</span><span class=o>&lt;</span><span class=n>string</span><span class=p>,</span> <span class=n>string</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>update_reference</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>references</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>id</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_reference</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>references</span><span class=p>[</span><span class=n>name</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>load_reference</span><span class=p>(</span><span class=n>name_or_id</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>name_or_id</span> <span class=ow>in</span> <span class=n>references</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>load</span><span class=p>(</span><span class=n>references</span><span class=p>[</span><span class=n>name_or_id</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>load</span><span class=p>(</span><span class=n>name_or_id</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>To insure current working stage, git introduces a HEAD, which can point to a reference (branch) or a commit. When the HEAD doesn&rsquo;t point to a reference, it is called &lsquo;detached HEAD&rsquo; state.
When you use top level command <code>git checkout</code>, you will edit the HEAD, the .git/HEAD file. When you use top level command <code>git branch</code>, you will edit the branch/reference, the .git/refs/heads file.</p><h2 id=staging-area>staging area</h2><p>暂存区目前比较难理解，尤其是其内容的变化不知道是如何进行的，以及tree该如何理解</p><p>Staging area is a middle state between current state and snapshot/commit.
If you have created many modifications, and you only want to use some of them to create a snapshot. Now, using current state to create a new snapshot/commit directly is inconvenient,</p><p>Every staging area is a tree, it is like a directory, which concludes some files and/or some directories.
Tree is also a object in git, so there is a hash string of tree in .git/objects. If you use the command <code>git cat-file -p</code> to get the value of a tree object, you will find its content is some files and/or some directories.</p><h2 id=movement>Movement</h2><h3 id=head-movement>HEAD movement</h3><p>Using relative reference</p><p>You can use <code>^</code> operator to move to a previous state, such as <code>main^</code> and <code>HEAD^</code>. And you can use multiple operators to move to multiple previous states.
To simplify the operation of multiple states movement, you can use <code>~</code> operator. For example, <code>HEAD~2</code> and <code>HEAD^^</code> are equivalent.</p><p><code>^ + &lt;number></code> isn&rsquo;t similar with <code>~ + &lt;number></code>, its usage is shown in the following figure.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161233851.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h3 id=branchcommit-movement>Branch/Commit movement</h3><h4 id=merge-branches>Merge branches</h4><p>The begining state is shown in the following figure:</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160033120.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li><code>git merge xxx</code>
Assuming current branch is main, you want merge bugFix branch into main, you can excute <code>git merge bugFix</code>, the result is shown in the following figure.</li></ul><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152059054.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li><code>git rebase xxx</code>
Assuming current branch is bugFix, you want merge bugFix branch and main and you want keep just one record line of commit, you can excute <code>git rebase main</code>, the result is shown in the following figure.</li></ul><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152104000.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><code>git rebase xxx</code> means moving current branch to the xxx branch, <code>git rebase yyy xxx</code> means moving xxx branch to the yyy branch</p><p>An important and easily overlooked point is that excute an rebase command to a commit doesn&rsquo;t mean just move this commit to the target commit, it will find the lowest common ancestor between source branch and target branch, move the source commits below the LCA to the target branch (below the latest commit) following the original index.</p><p>If the work of using command <code>git rebase</code> to adjust the branch is too complex, you can use the interactive version of rebase. Just add a extra parameter <code>-i</code> (interactive).</p><h4 id=revoke-changes>Revoke changes</h4><p>The begining state is shown in the following figure:</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160023109.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li><code>git reset xxx</code></li></ul><p>After you excute the command <code>git reset HEAD^</code>, the main back to the previous commit.
What need we notice is that the c2 changes don&rsquo;t disappear, these changes just don&rsquo;t add to staging area.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160021007.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ul><li><code>git revert xxx</code>
If we are editing a remote branch which need to be shared with other people, we need to use this command.</li></ul><p>After we excute the command <code>git revert HEAD</code></p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160031037.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>The difference between the two commands is that the latter command create a new commit, which can be push to the remote, so that other people can see the change.</p><h4 id=move-the-specify-commit>Move the specify commit</h4><ul><li><code>git cherry-pick commit...</code></li></ul><p>In software development, the term cherry-pick is used to describe the action of choosing specific commits from one branch and applying them to current branch. It is derived from the analogy of a tree with branches that have many cherries (commits).</p><p>The begining state is shown in the following figure</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160904585.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>Now we are in the main branch, after we excute the command <code>git cherry-pick bugFix</code>, the bugFix branch will be applied into current main branch. The result is shown in the following figure.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308160905731.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>If you select multiple commits when you use this command, it will pick the commit one by one, its role is similar with <code>git rebose -i</code></p><h2 id=realistic-scenarios>Realistic scenarios</h2><ol><li>select a specific historical commit to commit</li></ol><p>The scenario is that you just want to select the bugFix branch to merge with main and to commit.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161047477.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>You can switch to the main branch, then use the <code>git cherry-pick bugFix</code> to select the bugFix branch. The result is shown in the following figure.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161050767.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><ol start=2><li>edit the previous commit</li></ol><blockquote><p>Note: I still don&rsquo;t know the way of datas change, when we use the <code>git rebase -i</code> to edit many commit.</p></blockquote><p>Your task is that edit the newImage commit.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161052235.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>Firstly, excute <code>git rebase -i HEAD~2</code>, adjust the index of rebasing, get a result that is shown in the following figure.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161055063.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>Secondly, edit in the newImage branch, then excute <code>git commit --amend</code>.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161112039.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>Thirdly, excute <code>git rebase -i HEAD~2</code>, adjust the index of rebasing.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161114453.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>At last, switch to main branch and excute <code>git rebase caption</code> to move the main to the caption.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161115427.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><blockquote><p>You can also use the <code>git cherry-pick</code> to solve this problem</p></blockquote><h2 id=tag>Tag</h2><ul><li><code>git tag &lt;tag_name> &lt;commit></code>: create a tag named tag_name at specify commit</li></ul><h2 id=remote-warehouse>Remote warehouse</h2><h3 id=git-fetch>git fetch</h3><ul><li>download commit records which don&rsquo;t exist in local from remote</li><li>update the remote reference</li></ul><p><code>git fetch</code> is equivalent to download data from remote, it doesn&rsquo;t edit the local date such as local reference</p><p><strong>Parameters for the git-fetch</strong></p><ul><li><p><place>参数
git fetch origin foo: download the data from remote foo branch</p></li><li><p><source>:<destination>参数
download the remote source branch to the local destination branch, for example</p></li></ul><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162337619.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>If the source is null, the command will create a new local destination branch</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162343713.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h3 id=git-pull>git pull</h3><p>Because <code>git fetch</code> just download the remote data, we need edit the local data manually. So <code>git pull</code> will complete two works of download remote data and merge the remote and local reference.</p><p>The local and remote structure is shown in the following figure.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161707442.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>After we excute the command <code>git fetch</code>, the remote reference go ahead one step.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161709060.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>Then we excute the command <code>git merge o/main</code>.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161739081.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>If we excute <code>git pull</code>, we can get the same result. All in all, <code>git pull</code> = <code>git fetch</code> + <code>git merge</code></p><h3 id=git-push>git push</h3><p><code>git pull --rebase</code> = <code>git fetch</code> + <code>git rebase</code></p><p>Before push the local commit, maybe we need to handle some special situations.
c3 bases on c1, but remote branch has gone to the c2, so direct git push operation fails.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161803103.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>We need <code>git fetch</code> to gain the remote warehouse data, then merge the data, at last push the data to the remote.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161834028.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>And we can also use the <code>git merge</code> to substitute the <code>git rebase</code></p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308161825664.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><strong>Parameters for the git-push</strong></p><ul><li><p><code>git push &lt;remote> &lt;place></code>
After setting up the mapping, you can use origin as the remote directly. Place means the source of data for commit to the remote warehouse.</p></li><li><p>git push origin <source>:<destination>
When we set the mapping relationship between source and destination at origin, we can use the command <code>git push origin source</code> directly, but if we don&rsquo;t set it, we need give this information for git.</p></li></ul><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162303028.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>If the source is null, the command will delete the remote destination branch</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162341950.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h2 id=remote-tracking>Remote tracking</h2><p>The remote tracking means that you can specify a branch to track a remote branch.
Think about it, why when we commit an main branch, it will commit to the main branch in remote warehouse. The reason is that the local main branch maps to the original main branch.
You can use <code>git branch -u original/main side</code> to set the side branch to track the remote main branch, after it, you can git push directly at side branch. The result of changing the map relationship is shown in the following figure.</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308162242181.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h2 id=gitignore>.gitignore</h2><p>需要注意的一点是</p><blockquote><p>.gitignore 只能忽略那些原来没有被 track 的文件，如果某些文件已经被纳入了版本管理中，则修改 .gitignore 是无效的 <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></blockquote><p>There are two situations we need to think about:</p><ol><li><p>If the file is not be tracked, we can add it into the .gitignore directly and we needn&rsquo;t to do other things.</p></li><li><p>If the file is commited to the repository, we need to delete it first from the git. We can use <code>git rm --cached</code> or <code>git rm -f</code> command and then push the changes to the repository.</p></li></ol><blockquote><p>The difference between <code>git rm --cached</code> and <code>git rm -f</code></p><ul><li><code>git rm --cached</code> 仅从 Git 的暂存区中删除文件，而不会删除工作目录中的实际文件，执行这个命令后，文件将被标记为未追踪状态，并且不再包含在下一次提交中，通常用于停止 Git 跟踪已经添加到版本控制中的文件，但希望保留在工作目录中的情况</li><li><code>git rm -f</code> 从 Git 的暂存区中强制删除文件(<code>-f</code>)，并且同时从工作目录中删除实际的文件，执行这个命令后，文件将被完全从版本控制中移除，并且不再包含在下一次提交中，通常用于彻底删除文件，包括从版本控制中移除并从工作目录中清除</li></ul></blockquote><p>Next, we will give an example to illustrate the usage of these two commands</p><p>As we all know, there is a <code>.DS_Store</code> file in macOS，which is called macOS Desktop Services Store. If we don&rsquo;t use a .gitignore, we will push it to the repository. Now, assuming we have already submitted this file to the repository, how can we do to delete it from the repository?</p><p>We can find all files named <code>.DS_Store</code> and the use the command <code>git rm --cached .DS_Store</code> or <code>git rm -f .DS_Sotre</code> (according to your read requirement) to delete them. It is suitable for situations with a small number of files.</p><p>If we have too many files to delete, we can combine other command line tools and git. For example, we can use <code>find . -name .DS_Store -print0 | xargs -0 git rm -f --ignore-unmatch</code> to delete all the <code>.DS_Store</code> files in current path. <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></p><h3 id=global-config-of-gitignore>global config of .gitignore</h3><p>We can use <code>git config --global core.excludesfile &lt;.gitignore global config file path></code> to specify the global .gitignore file. <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> <sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup></p><blockquote><p>之所以添加多个参考，是因为目前对于 .gitignore 中的写法规则不是很明确，几个参考文章中给出的均不相同</p></blockquote><h2 id=comments>Comments</h2><h3 id=the-commands-which-are-used-in-experiment>The commands which are used in experiment</h3><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>—————————————————————————————————
</span></span><span class=line><span class=cl>control the ordinary file
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// create hash string of object from standord input and file
</span></span><span class=line><span class=cl>git hash-object -w --stdin
</span></span><span class=line><span class=cl>git hash-object -w test.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// get the value of object by hash string:
</span></span><span class=line><span class=cl>git cat-file -p d670460b4b4aece5915caf5c68d12f560a9fe3e4
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// judge the type of object:
</span></span><span class=line><span class=cl>git cat-file -t 1f7a7a472abf3dd9643fd615f6da379c4acb3e3a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>—————————————————————————————————
</span></span><span class=line><span class=cl>control the staging area
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// index is a equivalent concept of staging area
</span></span><span class=line><span class=cl>// select a file and put it into the staging area
</span></span><span class=line><span class=cl>git update-index --add test.txt
</span></span><span class=line><span class=cl>//what is the meaning of parameter cacheinfo？
</span></span><span class=line><span class=cl>// Now, in the working area, you just have one file named test.txt, but this file has twe versions because of different file content, such as version 1 and version 2. 
</span></span><span class=line><span class=cl>// The file is version 2 now, but you only want to use version 1 to update index, so you can use the parameter cacheinfo to specify to use version 1. 
</span></span><span class=line><span class=cl>git update-index --add --cacheinfo 100644 83baae61804e65cc73a7201a7252750c76066a30 test.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// create an object id for staging area which concludes selected files and directories
</span></span><span class=line><span class=cl>git write-tree
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>—————————————————————————————————
</span></span><span class=line><span class=cl>// control the commit object
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>echo &#39;first commit&#39; | git commit-tree d8329f
</span></span><span class=line><span class=cl>echo &#39;second commit&#39; | git commit-tree 0155eb -p fdf4fc3
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>—————————————————————————————————
</span></span><span class=line><span class=cl>// control the reference
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// create a new reference, the object must be a commit
</span></span><span class=line><span class=cl>git update-ref refs/heads/main &lt;object id&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// determine which branch now
</span></span><span class=line><span class=cl>git symbolic-ref HEAD
</span></span><span class=line><span class=cl>// edit the HEAD
</span></span><span class=line><span class=cl>git symbolic-ref HEAD refs/haeds/other</span></span></code></pre></td></tr></table></div></div><h2 id=reference>Reference</h2><ul><li>[1] <a href=https://missing-semester-cn.github.io/2020/version-control/ target=_blank rel="external nofollow noopener noreferrer">version control - missing-semester</a></li><li>[2] <a href="https://learngitbranching.js.org/?locale=zh_CN" target=_blank rel="external nofollow noopener noreferrer">Learn Git Branching</a></li><li>[3] <a href=https://git-scm.com/book/en/v2 target=_blank rel="external nofollow noopener noreferrer">Pro Git book</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://zhuanlan.zhihu.com/p/102890728 target=_blank rel="external nofollow noopener noreferrer">.gitignore 不生效原因及解决方法</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://www.didispace.com/article/git/git-clear-ds-store.html target=_blank rel="external nofollow noopener noreferrer">快速清理已经上传到Git仓库的.DS_Store文件</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://blog.ichr.me/post/git-ignore-all-ds-store-on-mac/ target=_blank rel="external nofollow noopener noreferrer">Git 在 macOS 中忽略所有 .DS_Store 文件</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://orianna-zzo.github.io/sci-tech/2018-01/mac%E4%B8%ADgit%E5%BF%BD%E7%95%A5.ds_store%E6%96%87%E4%BB%B6/ target=_blank rel="external nofollow noopener noreferrer">Mac中Git忽略.DS_Store文件</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href="https://mp.weixin.qq.com/s?__biz=MzAxODcyNjEzNQ==&amp;amp;mid=2247553983&amp;amp;idx=3&amp;amp;sn=5df8f29f34e7df677f782946bcf919e4&amp;amp;chksm=9bd3be27aca43731e602f386cbb676a5e0fcfa89a8bc00f730285b27013ff0b594e122d0317e&amp;amp;scene=21#wechat_redirect" target=_blank rel="external nofollow noopener noreferrer">Git全局排除配置</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2024-05-08 11:47:24">更新于 2024-05-08&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md><span><a href=https://github.com/gaohongy/blog/edit/main/content/posts/Git/version-control-system.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/blog/>主页</a></span></section></div><div class=post-nav><a href=/blog/posts/linux/comparison-of-shell-script-execution-modes/ class=post-nav-item rel=prev title="Comparison of Shell Script Execution Modes"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Comparison of Shell Script Execution Modes</a>
<a href=/blog/posts/c-c++/c++-asynchronous-and-synchronous-mechanisms/ class=post-nav-item rel=next title="C++ Asynchronous and Synchronous Mechanisms">C++ Asynchronous and Synchronous Mechanisms<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/blog/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/blog/lib/katex/katex.min.css><link rel=stylesheet href=/blog/lib/cookieconsent/cookieconsent.min.css><script src=/blog/lib/autocomplete/autocomplete.min.js defer></script><script src=/blog/lib/fuse/fuse.min.js defer></script><script src=/blog/lib/twemoji/twemoji.min.js defer></script><script src=/blog/lib/lightgallery/lightgallery.min.js defer></script><script src=/blog/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/blog/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/blog/lib/katex/katex.min.js defer></script><script src=/blog/lib/katex/auto-render.min.js defer></script><script src=/blog/lib/katex/mhchem.min.js defer></script><script src=/blog/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/blog/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:20,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/blog/js/theme.min.js defer></script></body></html>