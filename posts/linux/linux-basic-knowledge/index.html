<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Linux Basic Knowledge - </title><meta name=author content="ghy"><meta name=author-link content="https://github.com/gaohongy"><meta name=description content="Terminal 快捷键 历史命令： Ctrl P : 上一条命令，可以一直按表示一直往前翻 Ctrl N : 下一条命令 Ctrl R，再按历史命令中出现过的字符串：按字符串寻找历史命令 命令行编"><meta name=keywords content='Hugo,FixIt'><meta itemprop=name content="Linux Basic Knowledge"><meta itemprop=description content="Terminal 快捷键 历史命令： Ctrl P : 上一条命令，可以一直按表示一直往前翻 Ctrl N : 下一条命令 Ctrl R，再按历史命令中出现过的字符串：按字符串寻找历史命令 命令行编"><meta itemprop=datePublished content="2023-01-18T23:51:41+08:00"><meta itemprop=dateModified content="2024-03-25T14:32:56+08:00"><meta itemprop=wordCount content="5862"><meta itemprop=keywords content="Linux"><meta property="og:url" content="https://gaohongy.github.io/blog/posts/linux/linux-basic-knowledge/"><meta property="og:title" content="Linux Basic Knowledge"><meta property="og:description" content="Terminal 快捷键 历史命令： Ctrl P : 上一条命令，可以一直按表示一直往前翻 Ctrl N : 下一条命令 Ctrl R，再按历史命令中出现过的字符串：按字符串寻找历史命令 命令行编"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-18T23:51:41+08:00"><meta property="article:modified_time" content="2024-03-25T14:32:56+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux Basic Knowledge"><meta name=twitter:description content="Terminal 快捷键 历史命令： Ctrl P : 上一条命令，可以一直按表示一直往前翻 Ctrl N : 下一条命令 Ctrl R，再按历史命令中出现过的字符串：按字符串寻找历史命令 命令行编"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://gaohongy.github.io/blog/posts/linux/linux-basic-knowledge/><link rel=prev href=https://gaohongy.github.io/blog/posts/python/python-basic/><link rel=next href=https://gaohongy.github.io/blog/posts/hpc/gpu-structure-and-programing/><link rel=stylesheet href=/blog/css/style.min.css><link rel=stylesheet href=/blog/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/blog/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Linux Basic Knowledge","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/gaohongy.github.io\/blog\/posts\/linux\/linux-basic-knowledge\/"},"genre":"posts","wordcount":5862,"url":"https:\/\/gaohongy.github.io\/blog\/posts\/linux\/linux-basic-knowledge\/","datePublished":"2023-01-18T23:51:41+08:00","dateModified":"2024-03-25T14:32:56+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"ghy"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/blog/ title><img loading=lazy src=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-title=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-alt=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png class=logo style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text></span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/blog/posts/>Post</a></li><li class=menu-item><a class=menu-link href=/blog/categories/>Category</a></li><li class=menu-item><a class=menu-link href=/blog/tags/>Tag</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/blog/ title><img loading=lazy src=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-title=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-alt=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png class=logo style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text></span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></li><li class=menu-item><a class=menu-link href=/blog/posts/>Post</a></li><li class=menu-item><a class=menu-link href=/blog/categories/>Category</a></li><li class=menu-item><a class=menu-link href=/blog/tags/>Tag</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Linux Basic Knowledge</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/gaohongy title=Author target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202205161528792.jpg data-title=ghy data-alt=ghy class=avatar style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;ghy</a></span>
<span class=post-category>included in <a href=/blog/categories/linux/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Linux</a></span></div><div class=post-meta-line><span title="published on 2023-01-18 23:51:41"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2023-01-18>2023-01-18</time></span>&nbsp;<span title="Updated on 2024-03-25 14:32:56"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2024-03-25>2024-03-25</time></span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#本地免密登录>本地免密登录</a></li></ul><ul><li><a href=#ls命令各字段分布>ls命令各字段分布</a></li><li><a href=#常见的文件类型>常见的文件类型</a></li><li><a href=#文件权限解释>文件权限解释</a></li><li><a href=#关于时间>关于时间</a></li></ul><ul><li><a href=#查看当前可用shell>查看当前可用shell</a></li><li><a href=#修改默认shell>修改默认shell</a></li><li><a href=#特殊变量>特殊变量</a></li><li><a href=#替换技术>替换技术</a><ul><li><a href=#参数替换->参数替换 <code>${}</code></a></li><li><a href=#算术替换--和->算术替换 <code>(())</code> 和 <code>$(())</code></a></li><li><a href=#文件名替换>文件名替换</a></li><li><a href=#命令替换--或->命令替换 `` 或 <code>$()</code></a></li><li><a href=#进程替换--和->进程替换 <code>&lt;()</code> 和 <code>>()</code></a></li></ul></li><li><a href=#流及其重定向>流及其重定向</a><ul><li><a href=#输入流重定向>输入流重定向<code>&lt;</code></a></li><li><a href=#输出流重定向>输出流重定向<code>></code></a></li><li><a href=#向文件追加内容>向文件追加内容<code>>></code></a></li></ul></li><li><a href=#条件判断>条件判断</a></li><li><a href=#通配符>通配符</a></li><li><a href=#emacs-和-vi-模式切换>Emacs 和 vi 模式切换</a></li><li><a href=#job-control>job control</a></li><li><a href=#process-control>process control</a></li><li><a href=#ssh>SSH</a></li><li><a href=#common-scenarios>Common scenarios</a></li><li><a href=#常见sheel脚本示例>常见sheel脚本示例</a></li></ul></nav></div></div><div class=content id=content data-end-flag=EOF><h1 id=terminal-快捷键>Terminal 快捷键</h1><ul><li><p>历史命令：</p><ul><li>Ctrl P : 上一条命令，可以一直按表示一直往前翻</li><li>Ctrl N : 下一条命令</li><li>Ctrl R，再按历史命令中出现过的字符串：按字符串寻找历史命令</li></ul></li><li><p>命令行编辑：</p><ul><li>Ctrl A ： 移动光标到命令行首</li><li>Ctrl E : 移动光标到命令行尾</li><li>Ctrl B : 光标后退</li><li>Ctrl F : 光标前进</li><li>Ctrl W : 删除光标前的单词</li><li>Ctrl K ：删除光标之后所有字符</li><li>Ctrl U : 清空当前键入的命令</li></ul></li></ul><h1 id=用户相关命令>用户相关命令</h1><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>1. 创建用户：adduser username
</span></span><span class=line><span class=cl>2. 修改用户组: usermod -g groupname username
</span></span><span class=line><span class=cl>3. 删除组: groupdel groupname
</span></span><span class=line><span class=cl>4. 删除用户: deluser -r username(-r是为了顺带删除用户目录)
</span></span><span class=line><span class=cl>5. 强制结束进行: kill -9 processId</span></span></code></pre></td></tr></table></div></div><h1 id=云服务器>云服务器</h1><h2 id=本地免密登录>本地免密登录</h2><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png srcset="https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png?size=small, https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png data-alt=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202212290918239.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h1 id=文件相关>文件相关</h1><h2 id=ls命令各字段分布>ls命令各字段分布</h2><p>在使用ls获取文件的各项信息时，常用的选项包括如下几种：</p><ul><li><code>-a</code>：展示包括隐藏文件在內的所有文件</li><li><code>-l</code>：打印文件的详细信息</li><li><code>-h</code>：以人类可以理解的格式输出文件大小</li><li><code>-G</code>：以彩色文本输出结果</li></ul><p><strong>关于时间信息</strong></p><ul><li><code>-U</code>：展示文件的创建时间</li><li><code>-l</code>：展示文件最后的修改时间</li><li><code>-c</code>：展示文件状态最后改变时间</li><li><code>-u</code>：用文件最后的访问时间代替原始<code>-l</code>展示的最后修改时间</li></ul><p><strong>关于排序</strong></p><ul><li><code>-t</code>：首先根据时间戳降序排序，当时间戳相同时，按照文件名字典序生序排列</li><li><code>-S</code>：字典序排序前按照文件大小降序佩列</li></ul><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png srcset="https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png?size=small, https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png data-alt=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202307181613610.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ ls -l -a    # 也可以把选项合并成ls -la
</span></span><span class=line><span class=cl>total 56K
</span></span><span class=line><span class=cl>drwxr-xr-x  2 yzh yzh  4096 Sep 11 09:52 .  --&gt; 当前目录
</span></span><span class=line><span class=cl>drwxr-xr-x 10 yzh yzh  4096 Sep 10 19:51 .. --&gt; 父目录
</span></span><span class=line><span class=cl>-rw-r--r--  1 yzh yzh 34565 Sep  4 10:48 01.md
</span></span><span class=line><span class=cl>-rw-r--r--  1 yzh yzh  9314 Sep 11 09:36 02.md
</span></span><span class=line><span class=cl>|\./\./\./  | \./ \./ \.../ \........../   +--&gt; 文件名（the pathname）
</span></span><span class=line><span class=cl>| |  |  |   |  |   |    |        +------------&gt; 上次修改日期（last modified time）
</span></span><span class=line><span class=cl>| |  |  |   |  |   |    +---------------------&gt; 文件大小(字节)（number of bytes in the file）
</span></span><span class=line><span class=cl>| |  |  |   |  |   +--------------------------&gt; 文件所属组（group name）
</span></span><span class=line><span class=cl>| |  |  |   |  +------------------------------&gt; 文件所属用户（owner name）
</span></span><span class=line><span class=cl>| |  |  |   +---------------------------------&gt; 硬链接数量（number of links）
</span></span><span class=line><span class=cl>| |  |  +-------------------------------------&gt; 其他用户权限
</span></span><span class=line><span class=cl>| |  +----------------------------------------&gt; 组内用户权限
</span></span><span class=line><span class=cl>| +-------------------------------------------&gt; 所属用户权限
</span></span><span class=line><span class=cl>+---------------------------------------------&gt; 文件类型（file mode）</span></span></code></pre></td></tr></table></div></div><h2 id=常见的文件类型>常见的文件类型</h2><blockquote><ul><li><code>-</code>（短划线）：普通文件</li><li><code>d</code>：目录</li><li><code>l</code>：符号链接（软链接）</li><li><code>c</code>：字符设备文件</li><li><code>b</code>：块设备文件</li><li><code>s</code>：套接字文件</li><li><code>p</code>：命名管道（FIFO）</li></ul></blockquote><h2 id=文件权限解释>文件权限解释</h2><p>文件分为普通文件和目录文件。
对于普通文件，读写执行权限是比较好理解的；
对于目录文件，具有读权限意味着可以读取当前目录下的文件，具有写权限意味着可以更改目录结构，更改目录结构和更改目录下文件的内容是不同的，修改目录下一个普通文件中的内容并不会改变目录结构，在目录下新增/删除文件/目录才会更改目录结构；具有可执行权限意味着可以进入当前目录</p><h2 id=关于时间>关于时间</h2><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152222627.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><strong>时间有哪些分类？</strong></p><ol><li>访问时间（access time）- atime</li><li>inode 创建时间（inode creation time）</li><li>改变时间（change time）- ctime</li><li>修改时间（modification time）- mtime</li></ol><blockquote><p>通过<code>ls</code>命令的不同选项可以查询到不同的时间，查询创建时间采用<code>ls -lU</code>，查询访问时间采用<code>ls -lu</code>，查询改变时间采用<code>ls -lc</code>，查询修改时间采用<code>ls -l</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p></blockquote><p>在以上4种时间中，inode创建时间是很好理解的，问题在于如何区分其他三种时间类型，</p><ul><li>向文件写入会修改atime，ctime和mtime</li><li>文件权限和属主的变更会修改atime和ctime</li><li>读文件会修改atime</li></ul><p>从以上三种情形可以看出，改变是指文件状态的改变，修改是指文件内容的修改，访问操作涉及的范围则相对宽泛，无论读、写还是状态的改变都会涉及到文件的访问</p><h1 id=shell>shell</h1><blockquote><p>更多内容见<a href=https://www.cnblogs.com/hongyugao/p/17601142.html target=_blank rel="external nofollow noopener noreferrer">shell 十四问</a></p></blockquote><h2 id=查看当前可用shell>查看当前可用shell</h2><p><code>cat /etc/shells</code></p><h2 id=修改默认shell>修改默认shell</h2><ol><li><p>使用 <code>chsh</code> 工具
<code>chsh --shell /bin/zsh username</code></p></li><li><p>修改<code>/etc/passwd</code>文件</p></li></ol><h2 id=特殊变量>特殊变量</h2><ul><li>$0 - 脚本名</li><li>\$1 到 \$9 - 脚本的参数。$1 是第一个参数，依此类推</li><li>$@ - 所有参数</li><li>$# - 参数个数</li><li>$? - 前一个命令的返回值（返回码）。返回值0表示正常执行，非0表示有错误发生</li><li>$$ - 当前脚本的进程识别码</li><li>!! - 完整的上一条命令，包括参数。常见应用：当你因为权限不足执行命令失败时，可以使用 sudo !!再尝试一次。</li><li>$_ - 上一条命令的最后一个参数。如果你正在使用的是交互式 shell，你可以通过按下 Esc 之后键入 . 来获取这个值。</li></ul><blockquote><p>返回码可以和逻辑运算符（<code>||</code> 和 <code>&&</code>）在脚本中搭配使用</p></blockquote><p><strong>非常用变量</strong></p><ul><li>$* - 把所有命令行参数看为一个字符串</li><li>$@ - 把所有命令行参数看为一个个独立的字符串</li></ul><h2 id=替换技术>替换技术</h2><h3 id=参数替换->参数替换 <code>${}</code></h3><p>在<code>${}</code>中，通过<code>#</code>、<code>%</code>和<code>/</code>符号能够实现字符串处理</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=o>%</span> <span class=k>var</span><span class=o>=</span><span class=s2>&#34;hello&#34;</span>
</span></span><span class=line><span class=cl><span class=o>%</span> <span class=n>echo</span> <span class=o>$</span><span class=p>{</span><span class=k>var</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 单变量时花括号可省略</span>
</span></span><span class=line><span class=cl><span class=o>%</span> <span class=n>echo</span> <span class=o>$</span><span class=k>var</span>
</span></span><span class=line><span class=cl><span class=n>hello</span></span></span></code></pre></td></tr></table></div></div><p>常见的字符串操作根据<strong>修改位置</strong>分为：左侧和右侧，根据<strong>动作类型</strong>分为：删除和替换，根据<strong>匹配长度</strong>分为：最短匹配和最长匹配
实际的可选操作是以上几种分类方法的组合，具体方式如下
<a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348443.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><blockquote><p>注：以下示例使用的变量为var="/dir1/dir2/dir3/my.file.txt"</p></blockquote><ol><li><p>左侧删除最短匹配
<code>${var#pattern}</code>：#表示左侧、删除操作、进行最短匹配，即删除左侧和pattern匹配的最短部分
<code>${var#*/}</code>：pattern为*/，结果为dir1/dir2/dir3/my.file.txt</p></li><li><p>左侧删除最长匹配
<code>${var##pattern}</code>：##表示左侧、删除操作、进行最长匹配，即删除左侧和pattern匹配的最长部分
<code>${var##*/}</code>：pattern为*/，结果为my.file.txt</p></li><li><p>右侧删除最短匹配
<code>${var%pattern}</code>：%表示右侧、删除操作、进行最短匹配，即删除右侧和pattern匹配的最短部分
<code>${var%/*}</code>：pattern为/*，结果为dir1/dir2/dir3</p></li><li><p>右侧删除最长匹配
<code>${var%%pattern}</code>：%%表示右侧、删除操作、进行最长匹配，即删除右侧和pattern匹配的最长部分
<code>${var%%/*}</code>：pattern为/*，结果为空值</p></li><li><p>替换
<code>${var/pattern/replace}</code>：表示用replace替换字符串中的pattern，且只替换左侧第一个匹配项
<code>${var/dir/path}</code>：把左侧第一个dir替换为path，结果为/path1/dir2/dir3/my.file.txt
<code>${var//pattern/replace}</code>：表示用replace替换字符串中的pattern，且替换全部匹配项
<code>${var//dir/path}</code>：把全部的dir替换为path，结果为/path1/path2/path3/my.file.txt</p></li></ol><p><strong>String slicing is used to extract substrings from a string. Its syntax shows below:</strong></p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>${string:start:length}</span></span></code></pre></td></tr></table></div></div><ul><li>start: Represents the starting position of the slice (inclusive). If not specified, it defaults to 0.</li><li>length: Repersents the length of substring what you want to get.</li></ul><h3 id=算术替换--和->算术替换 <code>(())</code> 和 <code>$(())</code></h3><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>% res=$((3+5))
</span></span><span class=line><span class=cl>% echo res
</span></span><span class=line><span class=cl>8
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>% ((res = 3 * 5))
</span></span><span class=line><span class=cl>% echo $res
</span></span><span class=line><span class=cl>15</span></span></code></pre></td></tr></table></div></div><h3 id=文件名替换>文件名替换</h3><p>通过通配符匹配文件名</p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>% ls
</span></span><span class=line><span class=cl>a.c		b.c		c.c		d.c		mkdir_script.sh
</span></span><span class=line><span class=cl>% echo *.c
</span></span><span class=line><span class=cl>a.c b.c c.c d.c</span></span></code></pre></td></tr></table></div></div><h3 id=命令替换--或->命令替换 `` 或 <code>$()</code></h3><p>shell会首先执行反引号或<code>$()</code>包裹的内容，将执行结果作为整个替换部分的值</p><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-mysql data-lang=mysql><span class=line><span class=cl><span class=o>%</span><span class=w> </span><span class=k>out</span><span class=o>=`</span><span class=n>ls</span><span class=o>`</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>%</span><span class=w> </span><span class=n>echo</span><span class=w> </span><span class=err>$</span><span class=k>out</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>a</span><span class=p>.</span><span class=n>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>b</span><span class=p>.</span><span class=n>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>c</span><span class=p>.</span><span class=n>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>d</span><span class=p>.</span><span class=n>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>mkdir_script</span><span class=p>.</span><span class=n>sh</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>%</span><span class=w> </span><span class=k>out</span><span class=o>=</span><span class=err>$</span><span class=p>(</span><span class=n>pwd</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>%</span><span class=p>.</span><span class=n>echo</span><span class=w> </span><span class=err>$</span><span class=k>out</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>/</span><span class=n>tmp</span><span class=o>/</span><span class=n>missing</span><span class=o>/</span><span class=n>lecture2</span></span></span></code></pre></td></tr></table></div></div><h3 id=进程替换--和->进程替换 <code>&lt;()</code> 和 <code>>()</code></h3><p>进程替换在临时文件和管道操作符之外提供了一种新的方式，这种方式能够更加方便地处理命令之间的输入和输出关系
小括号内包含着命令，进程替换会将小括号内命令的执行结果存入一个临时文件中，同时返回该临时文件的路径</p><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>% mkdir dir1; touch dir1/{a,b}.c
</span></span><span class=line><span class=cl>% mkdir dir2; touch dir2/{b,c}.c
</span></span><span class=line><span class=cl>% diff &lt;(ls dir1) &lt;(ls dir2)
</span></span><span class=line><span class=cl>1d0
</span></span><span class=line><span class=cl>&lt; a.c
</span></span><span class=line><span class=cl>2a2
</span></span><span class=line><span class=cl>&gt; c.c</span></span></code></pre></td></tr></table></div></div><blockquote><p>diff需要两个文件作为输入，因此需要两个ls命令首先将执行结果放入一个文件中，再把文件路径作为输入值传递给diff命令，这一执行顺序刚好符合进程替换的执行顺序</p></blockquote><p><strong>如何确定临时文件的位置？</strong>
由于进程替换的返回值就是临时文件的路径，因此只需要在小括号内输入任意命令，通过<code>echo</code>命令输出进程替换的返回值即可显示临时文件的路径</p><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>% echo &lt;(true)
</span></span><span class=line><span class=cl>/dev/fd/11
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>% ls -l &lt;(true)
</span></span><span class=line><span class=cl>prw-rw----  0 root  staff  0  7 30 22:50 /dev/fd/11</span></span></code></pre></td></tr></table></div></div><blockquote><p>注：</p><ol><li>true也是一条命令，不进行操作只返回true值</li><li>/dev/fd 是一个特殊的目录，用于表示进程的文件描述符（File Descriptors），后面的11并不是固定值，只是在执行命令时获得的临时文件描述符为11</li></ol></blockquote><h2 id=流及其重定向>流及其重定向</h2><p>在了解具体的流重定向方法之前，我们需要首先了解Linux下3种特殊的设备：<code>stdin</code>, <code>stdout</code>, <code>stderr</code>。它们都位于<code>/dev/</code>目录下，详细信息如下：</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>lr-xr-xr-x  1 root  wheel     0B Nov 26 08:20 stderr -&gt; fd/2
</span></span><span class=line><span class=cl>lr-xr-xr-x  1 root  wheel     0B Nov 26 08:20 stdin -&gt; fd/0
</span></span><span class=line><span class=cl>lr-xr-xr-x  1 root  wheel     0B Nov 26 08:20 stdout -&gt; fd/1</span></span></code></pre></td></tr></table></div></div><p>下面要使用的0，1，2实际指代的就是这3类设备</p><p>更详细的内容请见<a href=https://www.gnu.org/software/bash/manual/html_node/Redirections.html target=_blank rel="external nofollow noopener noreferrer">3.6 Redirections | Linux manual</a>, 以下只是部分内容。</p><h3 id=输入流重定向>输入流重定向<code>&lt;</code></h3><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>% cat &lt; hello.txt
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>% cat 0&lt; hello.txt</span></span></code></pre></td></tr></table></div></div><blockquote><ul><li>0&lt;表示将<code>cat</code>命令的标准输入（stdin）从名为hello.txt的文件中读取数据，默认情况下，直接使用<code>&lt;</code>实现输入流重定向。之所以用0表示，是因为stdin实质上是一个链接文件/dev/stdin，其指向/dev/fd/0这个字符设备文件</li></ul></blockquote><h3 id=输出流重定向>输出流重定向<code>></code></h3><ul><li><code>1></code>表示将 <strong>标准输出(stdout)</strong> 从终端重定向至文件，由于被重定向因此终端不再显示结果。之所以用1表示是因为stdout->链接文件/dev/stdout->字符设备文件/dev/fd/1</li><li><code>2></code>表示将 <strong>标准错误输出(stderr)</strong> 从终端重定向至文件。<code>echo hello</code>的stdout结果是hello，stderr结果是空。stdout未发生重定向，因此终端显示hello，stderr的空结果被重定向至hello.txt。在一般情况下，stdout和stderr都是定向到终端的，通过<code>1></code>和<code>2></code>可以区分二者。之所以用2表示是因为stderr->链接文件/dev/stderr->字符设备文件/dev/fd/2</li><li><code>&></code> 和 <code>>&</code>表示将 <strong>标准输出和标准错误输出</strong> 统一重定向至文件</li></ul><blockquote><p>在不加数字时，即<code>></code>则默认表示对 <strong>标准输出(stdout)</strong> 进行重定向</p></blockquote><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>% <span class=nb>echo</span> hello &gt; hello.txt
</span></span><span class=line><span class=cl>% cat hello.txt
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>% <span class=nb>echo</span> hello 1&gt; hello.txt
</span></span><span class=line><span class=cl>% cat hello.txt
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>% <span class=nb>echo</span> hello 2&gt; hello.txt
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>% cat hello.txt</span></span></code></pre></td></tr></table></div></div><p>以上描述的都是将内容重定向至文件，如果想要重定向到管道(stdout / stderr)需要添加<code>&</code>符号，以便于区分普通文件名和管道名称</p><blockquote><ul><li><code>2>&amp;1</code>表示将标准错误重定向至标准输出（stdout）</li><li><code>1>&amp;2</code>表示将标准输出重定向至标准错误（stderr）</li></ul></blockquote><p>结合重定向至文件和重定向至管道，可以把所有输出内容全部重定向至文件，如以下代码所示</p><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>% xxx 1&gt;output.txt 2&gt;<span class=p>&amp;</span><span class=m>1</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>需要注意的是，上述重定向的顺序不能更改。大致可以理解为shell在重定向时是顺序处理的，如果标准错误的重定向先于标准输出的重定向，那么结果将是标准错误仍然会到达标准输出原有的输出端，并不会到达文件</p></blockquote><p>输入流和输出流合用</p><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># cat &lt; hello.txt &gt; hello2.txt
</span></span><span class=line><span class=cl># cat hello2.txt
</span></span><span class=line><span class=cl>hello</span></span></code></pre></td></tr></table></div></div><h3 id=向文件追加内容>向文件追加内容<code>>></code></h3><blockquote><p>与输出流重定向类似，存在<code>1>></code>和<code>2>></code>，表示以追加的形式进行stdout和stderr的重定向</p></blockquote><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># echo hello1 &gt; hello.txt
</span></span><span class=line><span class=cl># echo hello2 &gt;&gt; hello.txt
</span></span><span class=line><span class=cl>hello1
</span></span><span class=line><span class=cl>hello2</span></span></code></pre></td></tr></table></div></div><blockquote><p>注：需要明确的是在shell中执行都都是一个个的程序，即使是<code>sudo</code>也只是一个特殊的程序而已。程序的调用执行是由shell负责的，
在使用重定向和管道时，前后要执行的程序是不知情的，重定向和管道是由shell负责的。
因此对于命令<code>sudo echo x > file.txt</code>，假设当前用户并不具备file.txt的写权限，即使前面添加了<code>sudo</code>，执行结果依然是无权限，这是因为该命令的执行逻辑为，shell以<code>echo x</code>作为参数执行<code>sudo</code>程序，然后将结果输入到file.txt中，实际的输入过程shell仍然是以当前用户身份进行的，并不是以root身份进行的，因此操作仍然无权限。
在这种情况下，<code>echo x | sudo tee file.txt</code>就可以正常执行，这是因为实际是以root身份执行写入操作的</p></blockquote><h2 id=条件判断>条件判断</h2><ul><li><code>test</code></li><li><code>[</code></li><li><code>[[</code></li></ul><p>其中<code>[</code>和<code>test</code>是等效的命令，<code>[</code>也称为<code>test</code>的别名。三者具体的区别见如下站点</p><p><a href=http://mywiki.wooledge.org/BashFAQ/031 target=_blank rel="external nofollow noopener noreferrer">What is the difference between test, [ and [[ ?</a></p><h2 id=通配符>通配符</h2><ul><li><p><code>*</code>：匹配任意长度的字符，包括空字符
*.txt 可以匹配所有以.txt结尾的文件</p></li><li><p><code>?</code>：匹配单个字符
file?.txt 可以匹配file1.txt、file2.txt等</p></li><li><p><code>[]</code>：匹配方括号内的任意一个字符
[abc]file.txt 可以匹配afile.txt、bfile.txt、cfile.txt</p></li><li><p><code>{}</code>：用于生成多个相关字符串
file{1,2}.txt -> file1.txt file2.txt
file{a..d}.txt -> filea.txt fileb.txt filec.txt filed.txt</p></li></ul><blockquote><p><code>..</code>为范围操作符</p></blockquote><h2 id=emacs-和-vi-模式切换>Emacs 和 vi 模式切换</h2><p>如何在terminal下使用vi的操作方式？
见<a href=https://zsh.sourceforge.io/Guide/zshguide04.html target=_blank rel="external nofollow noopener noreferrer">Chapter 4: The Z-Shell Line Editor 4.1.1: The simple facts</a></p><h2 id=job-control>job control</h2><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202308152348566.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p><strong>如何管理background job？</strong></p><blockquote><p>使用<code>jobs</code>命令可以列出当前终端下的所有job<br>使用<code>kill</code>命令结合各种信号，以下是几种常用的信号及其解释</p></blockquote><ul><li><p><code>SIGSTOP</code> 和 <code>SIGCONT</code>
用于暂停/恢复进程的执行，<code>SIGSTOP</code>特殊在于其<strong>无法被捕获、处理或忽略</strong>
恢复进行执行还可以使用 <code>fg</code>（foreground）和<code>bg</code>（background）命令，分别控制进程在前台和后台继续执行</p></li><li><p><code>SIGHUP</code>
用于通知进程其终端连接已断开的一种信号，当一个终端连接被关闭时，该终端上运行的所有进程都会收到 SIGHUP 信号(和此信号相关的有一个<code>nohup</code>命令(Allows for a process to live when the terminal gets killed)，通过<code>nohup</code>和<code>&</code>的结合使用可以实现后台运行进程且终端关闭后进程不被终止的效果)</p></li><li><p><code>SIGINT</code>
通常是由用户在终端上按下Ctrl+C发送给程序的。它用于请求中断程序的执行。默认情况下，大多数程序会响应SIGINT信号并进行清理工作后正常退出</p></li><li><p><code>SIGTERM</code>
通常不是由用户手动触发，而是由系统或其他进程发送给程序，用于请求程序停止执行并正常退出</p></li><li><p><code>SIGKILL</code>
用于强制终止进程的执行，当进程收到信号时，无论其当前状态如何，该进程都会立即被终止，并且没有机会进行任何清理或处理操作</p></li></ul><p>对于以上内容，难点在于如何理解后4种信号，他们都会让进程终结，但是会应用于不同场景，更加常用的是<code>SIGINT</code> 和 <code>SIGKILL</code></p><h2 id=process-control>process control</h2><h2 id=ssh>SSH</h2><p>If you want a remote mechine excute a command or a script , you have two ways.
One is that you get a connection to the remote mechine firstly, and then excute a command or a script.
The other is that you can use a special format command. The command which you want to excute follows the ssh command. It looks like <code>ssh user@hostnames &lt;command></code>.</p><p>More details can be found in <a href=https://www.cnblogs.com/hongyugao/p/17624929.html target=_blank rel="external nofollow noopener noreferrer">ssh 教程</a></p><p>The configuration file of ssh is the <code>~/.ssh/config</code>, in this file, you can use a hostname, which can simplies the connection sentence for every time.</p><h2 id=common-scenarios>Common scenarios</h2><ol><li>move files in this directory to an another directory
<code>find . -type f -d 1 | xargs -I {} mv {} &lt;target directory></code></li></ol><h2 id=常见sheel脚本示例>常见sheel脚本示例</h2><ol><li>统计当前目录下各文件行数以及总行数</li></ol><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nv>total_lines</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> file in *<span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> -f <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nv>lines</span><span class=o>=</span><span class=k>$(</span>wc -l &lt; <span class=s2>&#34;</span><span class=nv>$file</span><span class=s2>&#34;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>        <span class=nv>total_lines</span><span class=o>=</span><span class=k>$((</span>total_lines <span class=o>+</span> lines<span class=k>))</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;File: </span><span class=nv>$file</span><span class=s2>, Lines: </span><span class=nv>$lines</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl><span class=k>done</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Total Lines: </span><span class=nv>$total_lines</span><span class=s2>&#34;</span></span></span></code></pre></td></tr></table></div></div><blockquote><p>注：该示例除了基本的变量替换以及条件判断，值得注意的一点就是<code>wc</code>在使用重定向符<code>&lt;</code>时，就无法再确定输入来自何文件，因此输出只会包含计算出的行数，不再包含文件名，刚好符合这里的用法</p></blockquote><h1 id=命令别名>命令别名</h1><ol><li>直接<code>alias [alias name]='[command]'</code>，仅在当前会话中有效</li><li>修改<code>/root/.bashrc</code>，永久生效</li></ol><blockquote><p>注意：alias的<code>=</code>两侧不能包含空格</p></blockquote><h1 id=symbolic-link-and-hard-link>Symbolic link and Hard link</h1><p>Please note that when you create a symbolic link, you ought to use the absolute path. If you use the relative path, when you excute the command <code>ls -l</code>, you will find the target file of symbolic link is not the file what you want it to point to.</p><p>But you can use either relative path or absolute path to create a hard link.</p><h1 id=search-command>Search command</h1><ul><li><code>man</code></li><li><code>apropos</code>: Use keyword to search command</li><li><a href=https://tldr.inbrowser.app/ target=_blank rel="external nofollow noopener noreferrer">tldr</a></li></ul><h1 id=reference>Reference</h1><blockquote><ul><li>[1] <a href=http://bbs.chinaunix.net/thread-218853-1-1.html target=_blank rel="external nofollow noopener noreferrer">shell 十三问原帖</a></li><li>[2] <a href=https://github.com/wzb56/13_questions_of_shell target=_blank rel="external nofollow noopener noreferrer">shell 十三问markdown版</a></li><li>[3] <a href=https://zsh.sourceforge.io/Guide/zshguide.html target=_blank rel="external nofollow noopener noreferrer">A User&rsquo;s Guide to the Z-Shell</a></li></ul></blockquote><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://en.wikipedia.org/wiki/Stat_%28system_call%29 target=_blank rel="external nofollow noopener noreferrer">Difference between atime、ctime and mtime</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2024-03-25 14:32:56">Updated on 2024-03-25&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md><span><a href=https://github.com/gaohongy/_blog/edit/main/content/posts/Linux/Linux-basic-knowledge.md title="Edit this page" target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>Edit this page</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/blog/>Home</a></span></section></div><div class=post-nav><a href=/blog/posts/python/python-basic/ class=post-nav-item rel=prev title="Python Basic"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Python Basic</a>
<a href=/blog/posts/hpc/gpu-structure-and-programing/ class=post-nav-item rel=next title="GPU Structure and Programing">GPU Structure and Programing<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>Theme FixIt works best with JavaScript enabled.</div></noscript></div><link rel=stylesheet href=/blog/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/blog/lib/katex/katex.min.css><link rel=stylesheet href=/blog/lib/cookieconsent/cookieconsent.min.css><script src=/blog/lib/autocomplete/autocomplete.min.js defer></script><script src=/blog/lib/fuse/fuse.min.js defer></script><script src=/blog/lib/twemoji/twemoji.min.js defer></script><script src=/blog/lib/lightgallery/lightgallery.min.js defer></script><script src=/blog/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/blog/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/blog/lib/katex/katex.min.js defer></script><script src=/blog/lib/katex/auto-render.min.js defer></script><script src=/blog/lib/katex/copy-tex.min.js defer></script><script src=/blog/lib/katex/mhchem.min.js defer></script><script src=/blog/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/blog/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:20,minMatchCharLength:2,noResultsFound:"No results found",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/blog/js/theme.min.js defer></script></body></html>