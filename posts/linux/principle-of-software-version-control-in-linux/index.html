<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Principle of software version control in Linux - </title><meta name=author content="ghy"><meta name=author-link content="https://github.com/gaohongy"><meta name=description content="In Linux, sometimes we will face to a software which has many editions, such as gcc and java. In different scenes, maybe we need different editions of the same software, so we must save all of them. But how can we switch them?
Linux uses the symlink to allow user easily switching between programs.
Then, we use the gcc as an example to illustrate the principle of software version control."><meta name=keywords content='Hugo,FixIt'><meta itemprop=name content="Principle of software version control in Linux"><meta itemprop=description content="In Linux, sometimes we will face to a software which has many editions, such as gcc and java. In different scenes, maybe we need different editions of the same software, so we must save all of them. But how can we switch them?
Linux uses the symlink to allow user easily switching between programs.
Then, we use the gcc as an example to illustrate the principle of software version control."><meta itemprop=datePublished content="2024-04-08T17:45:39+08:00"><meta itemprop=dateModified content="2024-06-28T23:44:55+08:00"><meta itemprop=wordCount content="435"><meta itemprop=keywords content="Linux"><meta property="og:url" content="https://gaohongy.github.io/blog/posts/linux/principle-of-software-version-control-in-linux/"><meta property="og:title" content="Principle of software version control in Linux"><meta property="og:description" content="In Linux, sometimes we will face to a software which has many editions, such as gcc and java. In different scenes, maybe we need different editions of the same software, so we must save all of them. But how can we switch them?
Linux uses the symlink to allow user easily switching between programs.
Then, we use the gcc as an example to illustrate the principle of software version control."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-08T17:45:39+08:00"><meta property="article:modified_time" content="2024-06-28T23:44:55+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Principle of software version control in Linux"><meta name=twitter:description content="In Linux, sometimes we will face to a software which has many editions, such as gcc and java. In different scenes, maybe we need different editions of the same software, so we must save all of them. But how can we switch them?
Linux uses the symlink to allow user easily switching between programs.
Then, we use the gcc as an example to illustrate the principle of software version control."><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://gaohongy.github.io/blog/posts/linux/principle-of-software-version-control-in-linux/><link rel=prev href=https://gaohongy.github.io/blog/posts/hpc/memory-alignment/><link rel=next href=https://gaohongy.github.io/blog/posts/c-c++/polymorphism/><link rel=stylesheet href=/blog/css/style.min.css><link rel=stylesheet href=/blog/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/blog/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Principle of software version control in Linux","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/gaohongy.github.io\/blog\/posts\/linux\/principle-of-software-version-control-in-linux\/"},"genre":"posts","wordcount":435,"url":"https:\/\/gaohongy.github.io\/blog\/posts\/linux\/principle-of-software-version-control-in-linux\/","datePublished":"2024-04-08T17:45:39+08:00","dateModified":"2024-06-28T23:44:55+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"ghy"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/blog/ title><img loading=lazy src=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-title=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-alt=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png class=logo style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text></span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/blog/posts/>Post</a></li><li class=menu-item><a class=menu-link href=/blog/categories/>Category</a></li><li class=menu-item><a class=menu-link href=/blog/tags/>Tag</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/blog/ title><img loading=lazy src=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-title=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png data-alt=https://img2024.cnblogs.com/blog/1898659/202406/1898659-20240630192930755-1492568318.png class=logo style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text></span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></li><li class=menu-item><a class=menu-link href=/blog/posts/>Post</a></li><li class=menu-item><a class=menu-link href=/blog/categories/>Category</a></li><li class=menu-item><a class=menu-link href=/blog/tags/>Tag</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class="toc-content always-active" id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Principle of software version control in Linux</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/gaohongy title=Author target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src=https://cdn.jsdelivr.net/gh/G-ghy/cloudImages@master/202205161528792.jpg data-title=ghy data-alt=ghy class=avatar style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;ghy</a></span>
<span class=post-category>included in <a href=/blog/categories/linux/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> Linux</a></span></div><div class=post-meta-line><span title="published on 2024-04-08 17:45:39"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2024-04-08>2024-04-08</time></span>&nbsp;<span title="Updated on 2024-06-28 23:44:55"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2024-06-28>2024-06-28</time></span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#where-is-the-gcc->Where is the gcc ?</a></li><li><a href=#the-design-idea-of-update-alternatives>The design idea of <code>update-alternatives</code></a></li><li><a href=#the-usage-method-of-update-alternatives>The usage method of <code>update-alternatives</code></a></li></ul></nav></div></div><div class=content id=content data-end-flag=EOF><p>In Linux, sometimes we will face to a software which has many editions, such as gcc and java. In different scenes, maybe we need different editions of the same software, so we must save all of them. But how can we switch them?</p><p>Linux uses the <strong>symlink</strong> to allow user easily switching between programs.</p><p>Then, we use the gcc as an example to illustrate the principle of software version control.</p><blockquote><p>Hypothetically speaking, the test mechine has two gcc, gcc-9 and gcc-11.</p></blockquote><h2 id=where-is-the-gcc->Where is the gcc ?</h2><p>There are only one directory is related to the execution of gcc, it is <code>/usr/bin/</code></p><p>In <code>/usr/bin</code>, we will find the following contents which are related to the <code>gcc</code>:</p><ol><li><p>gcc -> gcc-11</p></li><li><p>gcc-11 -> x86_64-linux-gnu-gcc-11</p></li><li><p>x86_64-linux-gnu-gcc-11</p></li><li><p>gcc-9 -> x86_64-linux-gnu-gcc-9</p></li><li><p>x86_64-linux-gnu-gcc-9</p></li></ol><p>We can find that only the <code>x86_64-linux-gnu-gcc-9</code> and <code>x86_64-linux-gnu-gcc-11</code> is the true executable file. The other files are all the symlinks.</p><p>Acording to the file structure, we can know that the key factor which influences the software edition we use is the <code>gcc</code> symlink. If we can change the target which is pointed by it, we can switch the different editions.</p><h2 id=the-design-idea-of-update-alternatives>The design idea of <code>update-alternatives</code></h2><p>According to the above discussion, if we are the author of <code>update-alternatives</code> command line tools, what we need to do is just edit the gcc symlink directivity.</p><p><code>update-alternatives</code> lets the <code>/usr/bin/gcc</code> point to a symlink <code>/etc/alternatives/gcc</code>(at the beginning, the <code>/usr/bin/gcc</code> points to the <code>/usr/bin/gcc-9</code> or <code>/usr/bin/gcc-11</code> directly, which is created by this tool. And <code>/etc/alternatives/gcc</code> is also a symlink which points to the <code>/usr/bin/gcc-9</code> or <code>/usr/bin/gcc-11</code>. When we want to use the <code>gcc-9</code>, <code>/etc/alternatives/gcc</code> will points to the <code>/usr/bin/gcc-9</code>, or else it will points to the <code>/usr/bin/gcc-11</code>.</p><p>It means that <code>update-alternatives</code> can just edit the directivity of the <code>/etc/alternatives/gcc</code> to edit the edition of software.</p><p>The hole flow looks like the following picture:</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082110917.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><h2 id=the-usage-method-of-update-alternatives>The usage method of <code>update-alternatives</code></h2><p>The key point is to understand the relationship between the symlinks.</p><p>We can get the usage method from help option:</p><blockquote><p>&ndash;install <link><name><path><priority></p><ul><li><link>is the symlink pointing to /etc/alternatives/<name>.</li><li><p><name>is the master name for this link group.</p></li><li><p><path>is the location of one of the alternative target files.</p></li><li><p><priority>is an integer; options with higher numbers have higher priority in automatic mode.</p></li></ul></blockquote><p>The relationship between link, name and path looks like the following pictures:</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082120766.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p><p>So the following command is an example:</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>update-alternatives /usr/bin/gcc gcc /usr/bin/gcc-9 <span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>update-alternatives /usr/bin/gcc gcc /usr/bin/gcc-11 <span class=m>1</span></span></span></code></pre></td></tr></table></div></div><p>We can use <code>update-alternatives --list gcc</code> to inspect the config result, we will get the following info:</p><blockquote><p>/usr/bin/gcc-11</p><p>/usr/bin/gcc-9</p></blockquote><p>And we can use <code>update-alternatives --config gcc</code> to chose an edition of gcc, it looks like</p><p><a class=lightgallery href="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png?size=large" data-thumbnail="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png?size=small" data-sub-html="<h2>https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png</h2>"><img loading=lazy src=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png srcset="https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png?size=small, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png?size=medium 1.5x, https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png?size=large 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png data-alt=https://cdn.jsdelivr.net/gh/gaohongy/cloudImages@master/202404082124537.png style="background:url(/blog/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2024-06-28 23:44:55">Updated on 2024-06-28&nbsp;</span></div></div><div class=post-info-line><div class=post-info-md><span><a href=https://github.com/gaohongy/_blog/edit/main/content/posts/Linux/principle-of-software-version-control-in-Linux.md title="Edit this page" target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>Edit this page</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/blog/>Home</a></span></section></div><div class=post-nav><a href=/blog/posts/hpc/memory-alignment/ class=post-nav-item rel=prev title="Memory Alignment"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Memory Alignment</a>
<a href=/blog/posts/c-c++/polymorphism/ class=post-nav-item rel=next title=Polymorphism>Polymorphism<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>Theme FixIt works best with JavaScript enabled.</div></noscript></div><link rel=stylesheet href=/blog/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/blog/lib/katex/katex.min.css><link rel=stylesheet href=/blog/lib/cookieconsent/cookieconsent.min.css><script src=/blog/lib/autocomplete/autocomplete.min.js defer></script><script src=/blog/lib/fuse/fuse.min.js defer></script><script src=/blog/lib/twemoji/twemoji.min.js defer></script><script src=/blog/lib/lightgallery/lightgallery.min.js defer></script><script src=/blog/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/blog/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/blog/lib/katex/katex.min.js defer></script><script src=/blog/lib/katex/auto-render.min.js defer></script><script src=/blog/lib/katex/copy-tex.min.js defer></script><script src=/blog/lib/katex/mhchem.min.js defer></script><script src=/blog/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/blog/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:20,minMatchCharLength:2,noResultsFound:"No results found",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/blog/js/theme.min.js defer></script></body></html>